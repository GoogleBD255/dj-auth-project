{% extends "base.html" %}

{% block title %} Sign Up - DJ Auth {% endblock title %}

{% block content %}

{% load static %}



{% comment %} <form action="" method='POST' style="width:400px">
    {% csrf_token %}
    <h3><strong>Signup Form</strong></h3>

    <div class="mb-3">
      <label class="form-label">Email Address:</label>
      <input type="email" class="form-control" name="email" placeholder="Enter email-address" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Username:</label>
      <input type="text" class="form-control" name="username" placeholder="Enter username" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" class="form-control" name="password1" placeholder="Enter password" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" class="form-control" name="password2" placeholder="Enter confirm password" required>
    </div>


   
      <button class="btn btn-primary" style="width:100%" type="submit">Register</button>
      <p>Already have an account? <a href="{% url 'signin' %}">Login</a></p>

</form> {% endcomment %}




{% comment %} <div class="login-container">
  <div class="login-card">
    <form class="login-form" method="POST">
      {% csrf_token %}
      <h3><strong>Create New Account</strong></h3>
      <input class="form-control mt-3" type="email" name="email" placeholder="Enter email address" required>
      <input class="form-control mt-3" type="text" name="username" placeholder="Enter username" required>
      <input class="form-control mt-3" type="password" name="password1" placeholder="Enter password" required>
      <input class="form-control" type="password" name="password2" placeholder="Enter confirm password" required>
      <div class="login-buttons">
        <button  class="login-button" type="submit">Register</button>
      </div>
      <p>Already have an account? <a href="{% url 'signin' %}">Login</a></p>
    </form>
    
  </div>
</div> {% endcomment %}



<div class="sub_container">
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="material-logo">
                    <img src="{% static 'image/django_logo.png' %}" alt="dj_logo" width="50" height="60">
                </div>
                <h2>Create new</h2>
                <p>to get all services from this site</p>
            </div>
            
            <form method="POST" class="login-form" id="loginForm">
                {% csrf_token %}
                <div class="form-group">
                    <div class="input-wrapper">
                        <input type="email" id="email" name="email" required>
                        <label for="email">Email</label>
                        <div class="input-line"></div>
                        <div class="ripple-container"></div>
                    </div>
                    <span class="error-message" id="emailError"></span>
                </div>

                <div class="form-group">
                    <div class="input-wrapper">
                        <input type="text" id="username" name="username" required>
                        <label for="username">Username</label>
                        <div class="input-line"></div>
                        <div class="ripple-container"></div>
                    </div>
                    <span class="error-message" id="usernameError"></span>
                </div>

                <div class="form-group">
                    <div class="input-wrapper password-wrapper">
                        <input type="password" id="password1" name="password1" required>
                        <label for="password1">Password</label>
                        <div class="input-line"></div>
                        <button type="button" class="password-toggle" id="passwordToggle1" aria-label="Toggle password visibility">
                            <div class="toggle-ripple"></div>
                            <span class="toggle-icon"></span>
                        </button>
                        <div class="ripple-container"></div>
                    </div>
                    <span class="error-message" id="passwordError"></span>
                </div>

                <div class="form-group">
                    <div class="input-wrapper password-wrapper">
                        <input type="password" id="password2" name="password2" required>
                        <label for="password2">Re-type Password</label>
                        <div class="input-line"></div>
                        <button type="button" class="password-toggle" id="passwordToggle2" aria-label="Toggle password visibility">
                            <div class="toggle-ripple"></div>
                            <span class="toggle-icon"></span>
                        </button>
                        <div class="ripple-container"></div>
                    </div>
                    <span class="error-message" id="passwordError"></span>
                </div>


                {% comment %} <div class="form-options">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="remember" name="remember">
                        <label for="remember" class="checkbox-label">
                            <div class="checkbox-material">
                                <div class="checkbox-ripple"></div>
                                <svg class="checkbox-icon" viewBox="0 0 24 24">
                                    <path class="checkbox-path" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                </svg>
                            </div>
                            Keep me signed in
                        </label>
                    </div> 
                    <a href="{% url "forgot_password" %}" class="forgot-password">Forgot password?</a>
                </div>  {% endcomment %}
                <button type="submit" class="login-btn material-btn">
                    <div class="btn-ripple"></div>
                    <span class="btn-text">CREATE</span>
                    {% comment %} <div class="btn-loader">
                        <svg class="loader-circle" viewBox="0 0 50 50">
                            <circle class="loader-path" cx="25" cy="25" r="12" fill="none" stroke="currentColor" stroke-width="3"/>
                        </svg>
                    </div> {% endcomment %}
                </button>
            </form>

            <div class="divider">
                <span>or</span>
            </div>

            {% comment %} <div class="social-login">
                <button type="button" class="social-btn google-material">
                    <div class="social-ripple"></div>
                    <div class="social-icon google-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                    </div>
                    <span>Continue with Google</span>
                </button>
                
                <button type="button" class="social-btn facebook-material">
                    <div class="social-ripple"></div>
                    <div class="social-icon facebook-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </div>
                    <span>Continue with Facebook</span>
                </button>
            </div> {% endcomment %}

            <div class="signup-link">
                <p>Already have an account? <a href="{% url 'signin' %}" class="create-account">Login</a></p>
            </div>

            <div class="success-message" id="successMessage">
                <div class="success-elevation">
                    <div class="success-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    </div>
                    <h3>Welcome back!</h3>
                    <p>Signing you in...</p>
                </div>
            </div>
        </div>
    </div>
</div>





<script>





{% comment %} function validateEmail() {
    const emailInput = document.getElementById('email');
    const email = emailInput.value.trim();
    const emailRegex = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;

    if (!email) {
        showError('email', 'Email is required');
        return false;
    }

    if (!emailRegex.test(email)) {
        showError('email', 'Enter a valid email address');
        return false;
    }

    clearError('email');
    return true;
}


function validateUsername() {
    const usernameInput = document.getElementById('username');
    const username = emailInput.value.trim();
    

    if (!username) {
        showError('username', 'Username is required');
        return false;
    }

    clearError('username');
    return true;
}


function validatePassword() {
    const password1 = document.getElementById('password1').value;
    const password2 = document.getElementById('password2').value;

    if (!password1 || !password2) {
        showError('password', 'Passwords are required');
        return false;
    }

    if (password1.length < 8) {
        showError('password', 'Password must be at least 8 characters');
        return false;
    }

    if (password1 === password2) {
        showError('password', 'Passwords  do not match');
        return false;
    }

    clearError('password');
    return true;
}

function showError(field, message) {
    const formGroup = document.getElementById(field).closest('.form-group');
    const errorElement = document.getElementById(`${field}Error`);

    formGroup.classList.add('error');
    errorElement.textContent = message;
    errorElement.classList.add('show');

    // Material-style shake animation
    const input = document.getElementById(field);
    input.style.animation = 'materialShake 0.4s ease-in-out';
    setTimeout(() => {
        input.style.animation = '';
    }, 400);
}

function clearError(field) {
    const formGroup = document.getElementById(field).closest('.form-group');
    const errorElement = document.getElementById(`${field}Error`);

    formGroup.classList.remove('error');
    errorElement.classList.remove('show');
    setTimeout(() => {
        errorElement.textContent = '';
    }, 200);
}

{% comment %} function handleSubmit(e) {
    e.preventDefault();

    const isEmailValid = validateEmail();
    const isPasswordValid = validatePassword();

    if (!isEmailValid || !isPasswordValid) {
        alert('✅ Login successful!');
        return true;
    }
    else{
        alert('❌ Login failed!');
        return false;
    }
} {% endcomment %}



{% comment %} document.getElementById('loginForm').addEventListener('submit', e => {
  e.preventDefault(); // form submit থামাও
  
  const isEmailValid = validateEmail();
    const isPasswordValid = validatePassword();

    if (isEmailValid || isPasswordValid) {
        alert('✅ Login successful!');
        e.target.submit()
    }
    else{
        alert('❌ Login failed!');
    }
}); {% endcomment %}
















</script>

















{% endblock content %}